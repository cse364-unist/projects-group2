{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useLocation}from'react-router-dom';import{faThumbsUp,faThumbsDown}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const useQuery=()=>{return new URLSearchParams(useLocation().search);};const SearchPage=()=>{const[results,setResults]=useState([]);const query=useQuery().get('tag')||'';useEffect(()=>{const fetchResults=async()=>{try{const response=await axios.get('http://localhost:8080/lines/search',{params:{tags:query,favorite:false},withCredentials:true});setResults(response.data.lines);}catch(error){console.error('Error fetching search results:',error);if(error.response){console.error('Response data:',error.response.data);}}};if(query){fetchResults();}},[query]);const handleLikeToggle=async(id,isFavorite)=>{try{if(isFavorite){await axios.post('http://localhost:8080/util/removefavorite',{id},{headers:{'accept':'*/*','Content-Type':'application/json','Cookie':'session=<yourSessionHere>'},withCredentials:true});setResults(prevResults=>prevResults.map(result=>result.id===id?{...result,favoriteCount:result.favoriteCount-1,isFavorite:false}:result));}else{await axios.post('http://localhost:8080/util/addfavorite',{id},{headers:{'accept':'*/*','Content-Type':'application/json','Cookie':'session=<yourSessionHere>'},withCredentials:true});setResults(prevResults=>prevResults.map(result=>result.id===id?{...result,favoriteCount:result.favoriteCount+1,isFavorite:true}:result));}}catch(error){console.error('Error toggling favorite status:',error);if(error.response){console.error('Response data:',error.response.data);}}};if(!query){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-8\",children:\"Please enter a search query.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-100 p-4\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-semibold text-center mb-4\",children:[\"Search Results for \\\"\",query,\"\\\"\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:results.length>0?results.map(result=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded shadow-md mb-4 cursor-pointer hover:bg-gray-100\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:result.line}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:result.actor}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:result.movie}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:result.tag.join(', ')}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-blue-500 cursor-pointer hover:text-blue-600 mr-2\",onClick:e=>{e.stopPropagation();// 클릭 이벤트가 부모로 전파되지 않도록 방지\nhandleLikeToggle(result.id,result.isFavorite);},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:result.isFavorite?faThumbsDown:faThumbsUp,className:\"mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:result.isFavorite?'좋아요 취소':'좋아요'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"\\uC88B\\uC544\\uC694: \",result.favoriteCount]})]})]},result.id)):/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-gray-500\",children:[\"No results found for \\\"\",query,\"\\\".\"]})})]});};export default SearchPage;","map":{"version":3,"names":["React","useState","useEffect","axios","useLocation","faThumbsUp","faThumbsDown","FontAwesomeIcon","jsx","_jsx","jsxs","_jsxs","useQuery","URLSearchParams","search","SearchPage","results","setResults","query","get","fetchResults","response","params","tags","favorite","withCredentials","data","lines","error","console","handleLikeToggle","id","isFavorite","post","headers","prevResults","map","result","favoriteCount","className","children","length","line","actor","movie","tag","join","onClick","e","stopPropagation","icon"],"sources":["/Users/dusanbaek/Desktop/SE_FE/src/pages/SearchPage/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useLocation } from 'react-router-dom';\nimport { faThumbsUp, faThumbsDown } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Line } from './type';\n\nconst useQuery = () => {\n  return new URLSearchParams(useLocation().search);\n};\n\nconst SearchPage: React.FC = () => {\n  const [results, setResults] = useState<Line[]>([]);\n  const query = useQuery().get('tag') || '';\n  \n  useEffect(() => {\n    const fetchResults = async () => {\n      try {\n        const response = await axios.get('http://localhost:8080/lines/search', {\n          params: { tags: query, favorite: false },\n          withCredentials: true,\n        });\n        setResults(response.data.lines);\n      } catch (error: any) {\n        console.error('Error fetching search results:', error);\n        if (error.response) {\n          console.error('Response data:', error.response.data);\n        }\n      }\n    };\n\n    if (query) {\n      fetchResults();\n    }\n  }, [query]);\n\n  const handleLikeToggle = async (id: number, isFavorite: boolean) => {\n    try {\n      if (isFavorite) {\n        await axios.post('http://localhost:8080/util/removefavorite', { id }, {\n          headers: {\n            'accept': '*/*',\n            'Content-Type': 'application/json',\n            'Cookie': 'session=<yourSessionHere>'\n          },\n          withCredentials: true\n        });\n\n        setResults(prevResults =>\n          prevResults.map(result =>\n            result.id === id ? { ...result, favoriteCount: result.favoriteCount - 1, isFavorite: false } : result\n          )\n        );\n      } else {\n        await axios.post('http://localhost:8080/util/addfavorite', { id }, {\n          headers: {\n            'accept': '*/*',\n            'Content-Type': 'application/json',\n            'Cookie': 'session=<yourSessionHere>'\n          },\n          withCredentials: true\n        });\n\n        setResults(prevResults =>\n          prevResults.map(result =>\n            result.id === id ? { ...result, favoriteCount: result.favoriteCount + 1, isFavorite: true } : result\n          )\n        );\n      }\n    } catch (error: any) {\n      console.error('Error toggling favorite status:', error);\n      if (error.response) {\n        console.error('Response data:', error.response.data);\n      }\n    }\n  };\n\n  if (!query) {\n    return <div className=\"text-center mt-8\">Please enter a search query.</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-4\">\n      <h2 className=\"text-2xl font-semibold text-center mb-4\">Search Results for \"{query}\"</h2>\n      <div className=\"mt-6\">\n        {results.length > 0 ? (\n          results.map((result: any) => (\n            <div \n              key={result.id} \n              className=\"bg-white p-4 rounded shadow-md mb-4 cursor-pointer hover:bg-gray-100\"\n            >\n              <p className=\"font-semibold\">{result.line}</p>\n              <p className=\"text-gray-600\">{result.actor}</p>\n              <p className=\"text-gray-600\">{result.movie}</p>\n              <p className=\"text-gray-600\">{result.tag.join(', ')}</p>\n              <div className=\"flex items-center\">\n                <div \n                  className=\"flex items-center text-blue-500 cursor-pointer hover:text-blue-600 mr-2\"\n                  onClick={(e) => {\n                    e.stopPropagation(); // 클릭 이벤트가 부모로 전파되지 않도록 방지\n                    handleLikeToggle(result.id, result.isFavorite);\n                  }} \n                >\n                  <FontAwesomeIcon icon={result.isFavorite ? faThumbsDown : faThumbsUp} className=\"mr-1\" />\n                  <span>{result.isFavorite ? '좋아요 취소' : '좋아요'}</span>\n                </div>\n                <p className=\"text-gray-600\">좋아요: {result.favoriteCount}</p>\n              </div>\n            </div>\n          ))\n        ) : (\n          <p className=\"text-center text-gray-500\">No results found for \"{query}\".</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SearchPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}