{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AppBar=()=>{const[searchQuery,setSearchQuery]=useState('');const[tags,setTags]=useState([]);const[suggestions,setSuggestions]=useState([]);const[isLoggedIn,setIsLoggedIn]=useState(false);const navigate=useNavigate();useEffect(()=>{const fetchTags=async()=>{try{const response=await axios.get('http://localhost:8080/util/taglist',{headers:{'accept':'*/*'}});setTags(response.data.tagDtoList);}catch(error){console.error('Error fetching tags:',error);}};const checkLoginStatus=async()=>{try{const response=await axios.get('http://localhost:8080/auth/check',{withCredentials:true});setIsLoggedIn(response.data.loggedIn);}catch(error){console.error('Error checking login status:',error);}};fetchTags();checkLoginStatus();},[]);const handleSearchChange=e=>{const value=e.target.value;setSearchQuery(value);const filteredSuggestions=tags.filter(tag=>tag.toLowerCase().includes(value.toLowerCase()));setSuggestions(filteredSuggestions);};const handleKeyPress=e=>{if(e.key==='Enter'){navigate(\"/search?tag=\".concat(searchQuery));}};const handleSuggestionClick=suggestion=>{setSearchQuery(suggestion);setSuggestions([]);navigate(\"/search?tag=\".concat(suggestion));};const handleLogout=async()=>{try{await axios.get('http://localhost:8080/auth/signout',{withCredentials:true});setIsLoggedIn(false);navigate('/login');}catch(error){console.error('Logout error:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 bg-gray-800 text-white\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"mr-4\",children:\"Home\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-grow\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchQuery,onChange:handleSearchChange,onKeyPress:handleKeyPress,placeholder:\"Search...\",className:\"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-black placeholder-gray-500\"}),suggestions.length>0&&/*#__PURE__*/_jsx(\"ul\",{className:\"absolute z-10 bg-white border rounded shadow-md w-full mt-1 max-h-40 overflow-y-scroll scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-200 text-black\",children:suggestions.map((suggestion,index)=>/*#__PURE__*/_jsx(\"li\",{onClick:()=>handleSuggestionClick(suggestion),className:\"px-4 py-2 cursor-pointer hover:bg-blue-500 hover:text-white\",children:suggestion},index))})]}),isLoggedIn?/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"ml-4\",children:\"Logout\"}):/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"ml-4\",children:\"Login\"})]});};export default AppBar;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","AppBar","searchQuery","setSearchQuery","tags","setTags","suggestions","setSuggestions","isLoggedIn","setIsLoggedIn","navigate","fetchTags","response","get","headers","data","tagDtoList","error","console","checkLoginStatus","withCredentials","loggedIn","handleSearchChange","e","value","target","filteredSuggestions","filter","tag","toLowerCase","includes","handleKeyPress","key","concat","handleSuggestionClick","suggestion","handleLogout","className","children","to","type","onChange","onKeyPress","placeholder","length","map","index","onClick"],"sources":["/Users/dusanbaek/Desktop/SE_FE/src/components/AppBar.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nconst AppBar: React.FC = () => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [tags, setTags] = useState<string[]>([]);\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchTags = async () => {\n      try {\n        const response = await axios.get('http://localhost:8080/util/taglist', {\n          headers: {\n            'accept': '*/*'\n          }\n        });\n        setTags(response.data.tagDtoList);\n      } catch (error) {\n        console.error('Error fetching tags:', error);\n      }\n    };\n\n    const checkLoginStatus = async () => {\n      try {\n        const response = await axios.get('http://localhost:8080/auth/check', {\n          withCredentials: true,\n        });\n        setIsLoggedIn(response.data.loggedIn);\n      } catch (error) {\n        console.error('Error checking login status:', error);\n      }\n    };\n\n    fetchTags();\n    checkLoginStatus();\n  }, []);\n\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setSearchQuery(value);\n    const filteredSuggestions = tags.filter(tag =>\n      tag.toLowerCase().includes(value.toLowerCase())\n    );\n    setSuggestions(filteredSuggestions);\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      navigate(`/search?tag=${searchQuery}`);\n    }\n  };\n\n  const handleSuggestionClick = (suggestion: string) => {\n    setSearchQuery(suggestion);\n    setSuggestions([]);\n    navigate(`/search?tag=${suggestion}`);\n  };\n\n  const handleLogout = async () => {\n    try {\n      await axios.get('http://localhost:8080/auth/signout', {\n        withCredentials: true,\n      });\n      setIsLoggedIn(false);\n      navigate('/login');\n    } catch (error) {\n      console.error('Logout error:', error);\n    }\n  };\n\n  return (\n    <div className=\"flex justify-between items-center p-4 bg-gray-800 text-white\">\n      <Link to=\"/\" className=\"mr-4\">Home</Link>\n      <div className=\"relative flex-grow\">\n        <input\n          type=\"text\"\n          value={searchQuery}\n          onChange={handleSearchChange}\n          onKeyPress={handleKeyPress}\n          placeholder=\"Search...\"\n          className=\"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white text-black placeholder-gray-500\"\n        />\n        {suggestions.length > 0 && (\n          <ul className=\"absolute z-10 bg-white border rounded shadow-md w-full mt-1 max-h-40 overflow-y-scroll scrollbar-thin scrollbar-thumb-gray-500 scrollbar-track-gray-200 text-black\">\n            {suggestions.map((suggestion, index) => (\n              <li\n                key={index}\n                onClick={() => handleSuggestionClick(suggestion)}\n                className=\"px-4 py-2 cursor-pointer hover:bg-blue-500 hover:text-white\"\n              >\n                {suggestion}\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n      {isLoggedIn ? (\n        <button onClick={handleLogout} className=\"ml-4\">\n          Logout\n        </button>\n      ) : (\n        <Link to=\"/login\" className=\"ml-4\">Login</Link>\n      )}\n    </div>\n  );\n}\n\nexport default AppBar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}