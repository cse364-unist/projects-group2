{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faThumbsUp,faThumbsDown}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VotingBoard=()=>{const[lines,setLines]=useState([]);const[error,setError]=useState('');const[loading,setLoading]=useState(true);const fetchLines=async()=>{try{const response=await axios.get('http://localhost:8080/myline/board',{withCredentials:true,headers:{'accept':'*/*'}});console.log('API response:',response.data);// API 응답 데이터를 로그로 출력\nsetLines(response.data.lineCandidateDtoList||[]);// 응답 데이터가 없을 경우 빈 배열로 초기화\nsetLoading(false);}catch(err){console.error('Fetch error:',err);// 에러 로그 출력\nsetError('Failed to fetch lines. Please try again.');setLoading(false);}};useEffect(()=>{fetchLines();},[]);const handleLike=async id=>{try{await axios.post('http://localhost:8080/myline/like',{id},{withCredentials:true,headers:{'accept':'*/*','Content-Type':'application/json'}});fetchLines();}catch(err){setError('Failed to like the line. Please try again.');}};const handleDislike=async id=>{try{await axios.post('http://localhost:8080/myline/dislike',{id},{withCredentials:true,headers:{'accept':'*/*','Content-Type':'application/json'}});fetchLines();}catch(err){setError('Failed to dislike the line. Please try again.');}};const handleCancelLike=async id=>{try{await axios.post('http://localhost:8080/myline/unlike',{id},{withCredentials:true,headers:{'accept':'*/*','Content-Type':'application/json'}});fetchLines();}catch(err){setError('Failed to cancel like. Please try again.');}};const handleCancelDislike=async id=>{try{await axios.post('http://localhost:8080/myline/undislike',{id},{withCredentials:true,headers:{'accept':'*/*','Content-Type':'application/json'}});fetchLines();}catch(err){setError('Failed to cancel dislike. Please try again.');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-8\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded shadow-md\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-center mb-4\",children:\"Voting Board\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-center mb-4\",children:error}),/*#__PURE__*/_jsx(\"div\",{children:lines.length>0?lines.map(line=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded mb-4 shadow\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:line.line}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:line.movie}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:line.tags.join(', ')}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Likes: \",line.like,\", Dislikes: \",line.dislike]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600\",children:[\"Expires at: \",line.expireAt]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-2 space-x-4\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center text-blue-500 hover:text-blue-600\",onClick:()=>line.isLike?handleCancelLike(line.id):handleLike(line.id),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faThumbsUp,className:\"mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:line.isLike?'Cancel Like':'Like'})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center text-red-500 hover:text-red-600\",onClick:()=>line.isDislike?handleCancelDislike(line.id):handleDislike(line.id),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faThumbsDown,className:\"mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:line.isDislike?'Cancel Dislike':'Dislike'})]})]})]},line.id)):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500\",children:\"No lines available for voting.\"})})]});};export default VotingBoard;","map":{"version":3,"names":["React","useState","useEffect","axios","FontAwesomeIcon","faThumbsUp","faThumbsDown","jsx","_jsx","jsxs","_jsxs","VotingBoard","lines","setLines","error","setError","loading","setLoading","fetchLines","response","get","withCredentials","headers","console","log","data","lineCandidateDtoList","err","handleLike","id","post","handleDislike","handleCancelLike","handleCancelDislike","className","children","length","map","line","movie","tags","join","like","dislike","expireAt","onClick","isLike","icon","isDislike"],"sources":["/Users/dusanbaek/Desktop/SE_FE/src/pages/Board/VotingBoard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faThumbsUp, faThumbsDown } from '@fortawesome/free-solid-svg-icons';\n\nconst VotingBoard: React.FC = () => {\n  const [lines, setLines] = useState<any[]>([]);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(true);\n\n  const fetchLines = async () => {\n    try {\n      const response = await axios.get('http://localhost:8080/myline/board', {\n        withCredentials: true,\n        headers: {\n          'accept': '*/*',\n        }\n      });\n      console.log('API response:', response.data); // API 응답 데이터를 로그로 출력\n      setLines(response.data.lineCandidateDtoList || []); // 응답 데이터가 없을 경우 빈 배열로 초기화\n      setLoading(false);\n    } catch (err) {\n      console.error('Fetch error:', err); // 에러 로그 출력\n      setError('Failed to fetch lines. Please try again.');\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchLines();\n  }, []);\n\n  const handleLike = async (id: number) => {\n    try {\n      await axios.post('http://localhost:8080/myline/like', { id }, {\n        withCredentials: true,\n        headers: {\n          'accept': '*/*',\n          'Content-Type': 'application/json',\n        }\n      });\n      fetchLines();\n    } catch (err) {\n      setError('Failed to like the line. Please try again.');\n    }\n  };\n\n  const handleDislike = async (id: number) => {\n    try {\n      await axios.post('http://localhost:8080/myline/dislike', { id }, {\n        withCredentials: true,\n        headers: {\n          'accept': '*/*',\n          'Content-Type': 'application/json',\n        }\n      });\n      fetchLines();\n    } catch (err) {\n      setError('Failed to dislike the line. Please try again.');\n    }\n  };\n\n  const handleCancelLike = async (id: number) => {\n    try {\n      await axios.post('http://localhost:8080/myline/unlike', { id }, {\n        withCredentials: true,\n        headers: {\n          'accept': '*/*',\n          'Content-Type': 'application/json',\n        }\n      });\n      fetchLines();\n    } catch (err) {\n      setError('Failed to cancel like. Please try again.');\n    }\n  };\n\n  const handleCancelDislike = async (id: number) => {\n    try {\n      await axios.post('http://localhost:8080/myline/undislike', { id }, {\n        withCredentials: true,\n        headers: {\n          'accept': '*/*',\n          'Content-Type': 'application/json',\n        }\n      });\n      fetchLines();\n    } catch (err) {\n      setError('Failed to cancel dislike. Please try again.');\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center mt-8\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"bg-white p-8 rounded shadow-md\">\n      <h2 className=\"text-2xl font-semibold text-center mb-4\">Voting Board</h2>\n      {error && <p className=\"text-red-500 text-center mb-4\">{error}</p>}\n      <div>\n        {lines.length > 0 ? (\n          lines.map(line => (\n            <div key={line.id} className=\"bg-gray-50 p-4 rounded mb-4 shadow\">\n              <p className=\"font-semibold\">{line.line}</p>\n              <p className=\"text-gray-600\">{line.movie}</p>\n              <p className=\"text-gray-600\">{line.tags.join(', ')}</p>\n              <p className=\"text-gray-600\">Likes: {line.like}, Dislikes: {line.dislike}</p>\n              <p className=\"text-gray-600\">Expires at: {line.expireAt}</p>\n              <div className=\"flex items-center mt-2 space-x-4\">\n                <button\n                  className=\"flex items-center text-blue-500 hover:text-blue-600\"\n                  onClick={() => line.isLike ? handleCancelLike(line.id) : handleLike(line.id)}\n                >\n                  <FontAwesomeIcon icon={faThumbsUp} className=\"mr-1\" />\n                  <span>{line.isLike ? 'Cancel Like' : 'Like'}</span>\n                </button>\n                <button\n                  className=\"flex items-center text-red-500 hover:text-red-600\"\n                  onClick={() => line.isDislike ? handleCancelDislike(line.id) : handleDislike(line.id)}\n                >\n                  <FontAwesomeIcon icon={faThumbsDown} className=\"mr-1\" />\n                  <span>{line.isDislike ? 'Cancel Dislike' : 'Dislike'}</span>\n                </button>\n              </div>\n            </div>\n          ))\n        ) : (\n          <p className=\"text-center text-gray-500\">No lines available for voting.</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default VotingBoard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}