{"ast":null,"code":"var _jsxFileName = \"/Users/dusanbaek/Desktop/SE_FE/src/pages/SearchPage/index.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useLocation } from 'react-router-dom';\nimport { faThumbsUp, faThumbsDown } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useQuery = () => {\n  _s();\n  return new URLSearchParams(useLocation().search);\n};\n_s(useQuery, \"EuD9q2dZ34PfN/QO2OBhBzeMxmY=\", false, function () {\n  return [useLocation];\n});\nconst SearchPage = () => {\n  _s2();\n  const [results, setResults] = useState([]);\n  const query = useQuery().get('tag') || '';\n  useEffect(() => {\n    const fetchResults = async () => {\n      try {\n        const response = await axios.get('http://localhost:8080/lines/search', {\n          params: {\n            tags: query,\n            favorite: false\n          },\n          withCredentials: true\n        });\n        setResults(response.data.lines);\n      } catch (error) {\n        console.error('Error fetching search results:', error);\n        if (error.response) {\n          console.error('Response data:', error.response.data);\n        }\n      }\n    };\n    if (query) {\n      fetchResults();\n    }\n  }, [query]);\n  const handleLikeToggle = async (id, isFavorite) => {\n    try {\n      if (isFavorite) {\n        await axios.post('http://localhost:8080/util/removefavorite', {\n          id\n        }, {\n          headers: {\n            'accept': '*/*',\n            'Content-Type': 'application/json',\n            'Cookie': 'session=<yourSessionHere>'\n          },\n          withCredentials: true\n        });\n        setResults(prevResults => prevResults.map(result => result.id === id ? {\n          ...result,\n          favoriteCount: result.favoriteCount - 1,\n          isFavorite: false\n        } : result));\n      } else {\n        await axios.post('http://localhost:8080/util/addfavorite', {\n          id\n        }, {\n          headers: {\n            'accept': '*/*',\n            'Content-Type': 'application/json',\n            'Cookie': 'session=<yourSessionHere>'\n          },\n          withCredentials: true\n        });\n        setResults(prevResults => prevResults.map(result => result.id === id ? {\n          ...result,\n          favoriteCount: result.favoriteCount + 1,\n          isFavorite: true\n        } : result));\n      }\n    } catch (error) {\n      console.error('Error toggling favorite status:', error);\n      if (error.response) {\n        console.error('Response data:', error.response.data);\n      }\n    }\n  };\n  if (!query) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mt-8\",\n      children: \"Please enter a search query.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-semibold text-center mb-4\",\n      children: [\"Search Results for \\\"\", query, \"\\\"\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6\",\n      children: results.length > 0 ? results.map(result => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded shadow-md mb-4 cursor-pointer hover:bg-gray-100\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"font-semibold\",\n          children: result.line\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: result.actor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: result.movie\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: result.tag.join(', ')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center text-blue-500 cursor-pointer hover:text-blue-600 mr-2\",\n            onClick: e => {\n              e.stopPropagation(); // 클릭 이벤트가 부모로 전파되지 않도록 방지\n              handleLikeToggle(result.id, result.isFavorite);\n            },\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: result.isFavorite ? faThumbsDown : faThumbsUp,\n              className: \"mr-1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: result.isFavorite ? '좋아요 취소' : '좋아요'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600\",\n            children: [\"\\uC88B\\uC544\\uC694: \", result.favoriteCount]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this)]\n      }, result.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center text-gray-500\",\n        children: [\"No results found for \\\"\", query, \"\\\".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s2(SearchPage, \"v5iDu+vPVV+NdWnA+h0wy+83aCE=\", false, function () {\n  return [useQuery];\n});\n_c = SearchPage;\nexport default SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useState","useEffect","axios","useLocation","faThumbsUp","faThumbsDown","FontAwesomeIcon","jsxDEV","_jsxDEV","useQuery","_s","URLSearchParams","search","SearchPage","_s2","results","setResults","query","get","fetchResults","response","params","tags","favorite","withCredentials","data","lines","error","console","handleLikeToggle","id","isFavorite","post","headers","prevResults","map","result","favoriteCount","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","line","actor","movie","tag","join","onClick","e","stopPropagation","icon","_c","$RefreshReg$"],"sources":["/Users/dusanbaek/Desktop/SE_FE/src/pages/SearchPage/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useLocation } from 'react-router-dom';\nimport { faThumbsUp, faThumbsDown } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Line } from './type';\n\nconst useQuery = () => {\n  return new URLSearchParams(useLocation().search);\n};\n\nconst SearchPage: React.FC = () => {\n  const [results, setResults] = useState<Line[]>([]);\n  const query = useQuery().get('tag') || '';\n  \n  useEffect(() => {\n    const fetchResults = async () => {\n      try {\n        const response = await axios.get('http://localhost:8080/lines/search', {\n          params: { tags: query, favorite: false },\n          withCredentials: true,\n        });\n        setResults(response.data.lines);\n      } catch (error: any) {\n        console.error('Error fetching search results:', error);\n        if (error.response) {\n          console.error('Response data:', error.response.data);\n        }\n      }\n    };\n\n    if (query) {\n      fetchResults();\n    }\n  }, [query]);\n\n  const handleLikeToggle = async (id: number, isFavorite: boolean) => {\n    try {\n      if (isFavorite) {\n        await axios.post('http://localhost:8080/util/removefavorite', { id }, {\n          headers: {\n            'accept': '*/*',\n            'Content-Type': 'application/json',\n            'Cookie': 'session=<yourSessionHere>'\n          },\n          withCredentials: true\n        });\n\n        setResults(prevResults =>\n          prevResults.map(result =>\n            result.id === id ? { ...result, favoriteCount: result.favoriteCount - 1, isFavorite: false } : result\n          )\n        );\n      } else {\n        await axios.post('http://localhost:8080/util/addfavorite', { id }, {\n          headers: {\n            'accept': '*/*',\n            'Content-Type': 'application/json',\n            'Cookie': 'session=<yourSessionHere>'\n          },\n          withCredentials: true\n        });\n\n        setResults(prevResults =>\n          prevResults.map(result =>\n            result.id === id ? { ...result, favoriteCount: result.favoriteCount + 1, isFavorite: true } : result\n          )\n        );\n      }\n    } catch (error: any) {\n      console.error('Error toggling favorite status:', error);\n      if (error.response) {\n        console.error('Response data:', error.response.data);\n      }\n    }\n  };\n\n  if (!query) {\n    return <div className=\"text-center mt-8\">Please enter a search query.</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-4\">\n      <h2 className=\"text-2xl font-semibold text-center mb-4\">Search Results for \"{query}\"</h2>\n      <div className=\"mt-6\">\n        {results.length > 0 ? (\n          results.map((result: any) => (\n            <div \n              key={result.id} \n              className=\"bg-white p-4 rounded shadow-md mb-4 cursor-pointer hover:bg-gray-100\"\n            >\n              <p className=\"font-semibold\">{result.line}</p>\n              <p className=\"text-gray-600\">{result.actor}</p>\n              <p className=\"text-gray-600\">{result.movie}</p>\n              <p className=\"text-gray-600\">{result.tag.join(', ')}</p>\n              <div className=\"flex items-center\">\n                <div \n                  className=\"flex items-center text-blue-500 cursor-pointer hover:text-blue-600 mr-2\"\n                  onClick={(e) => {\n                    e.stopPropagation(); // 클릭 이벤트가 부모로 전파되지 않도록 방지\n                    handleLikeToggle(result.id, result.isFavorite);\n                  }} \n                >\n                  <FontAwesomeIcon icon={result.isFavorite ? faThumbsDown : faThumbsUp} className=\"mr-1\" />\n                  <span>{result.isFavorite ? '좋아요 취소' : '좋아요'}</span>\n                </div>\n                <p className=\"text-gray-600\">좋아요: {result.favoriteCount}</p>\n              </div>\n            </div>\n          ))\n        ) : (\n          <p className=\"text-center text-gray-500\">No results found for \"{query}\".</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SearchPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}